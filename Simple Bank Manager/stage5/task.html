
<h2>Description</h2>

<p>
    Now on our last stage we will implement a feature to pay bills
    using our bank manager application.
</p>
<p>
    After clicking on Pay Bills button on User Menu
    users should be redirected to Pay Bills screen.
    There user can input a bill code
    and with correct code bill's information will be shown in a dialog.
    User should have option to confirm bill payment or not.
    Validation should also be done to see if the user has enough balance in account to pay the bill.
    If the validation is succeeded
    then user's balance should be subtracted to account for the bill payment.
</p>

<br>

<h2>Objectives</h2>

<ol>
    <li>
        Add a Fragment named <code>PayBillsFragment</code> to the navigation graph
        <ul>
            <li>
                Add an <code>EditText</code> to <code>PayBillsFragment</code> with
                <code>id</code> <code>PayBillsCodeInputEditText</code>,
                the hint should be <code>Enter code</code>
                and inputType <code>text</code>;
            </li>
            <li>
                Add an <code>Button</code> to <code>PayBillsFragment</code> with
                <code>id</code> <code>PayBillsShowBillInfoButton</code>
                and with a text <code>Show bill info</code>;
            </li>
        </ul>

    <li>
        On the design tab of <code>nav_graph</code>
        make a connection from <code>UserMenuFragment</code>
        to <code>PayBillsFragment</code>.
        The code generated after making the connection should contain
        an action with id <code>action_userMenuFragment_to_payBillsFragment</code>
        and destination <code>payBillsFragment</code>;
    </li>

    <li>
        After click on <code>userMenuPayBillsButton</code> button, display <code>PayBillsFragment</code>.
    </li>

    <li>
        On <code>PayBillsFragment</code>
        users should be able to input bill code on <code>payBillsCodeInputEditText</code>
    </li>
    <li>
        after click on <code>PayBillsShowBillInfoButton</code>, a dialog should appear.
        <ul>
            <li>
                If bill code is not found on billInfoMap then
                show an <code>AlertDialog</code> with
                title <code>Error</code>,
                message <code>Wrong code</code>
                and a positive button with text <code>Ok</code>;
            </li>
            <li>
                If bill code is not found on billInfoMap then
                show an <code>AlertDialog</code> with
                title <code>Bill info</code>,
                positive button with text <code>Confirm</code>,
                negative button with text <code>Cancel</code>,
                and a message with the following scheme(including new lines):
                <br><br>
                <pre><code>
Name: $billName
BillCode: $billCode
Amount: $billAmount
                </code></pre>
                where $billName, $billCode and $billAmount are placeholders.
                If users click on <code>Confirm</code> button
                and there is enough balance in account
                then bill amount should be subtracted from this account balance
                and Toast message appears with text
                <code>"Payment for bill "bill name", was successful"</code>.
                If user clicks on <code>Confirm</code> button
                and there is not enough balance in account
                then close the current dialog and display a new <code>AlertDialog</code> with
                title <code>Error</code>,
                message <code>Not enough funds</code>
                and positive button with text <code>Ok</code>.
                Clicking Ok should just close the dialog
            </li>
        </ul>
    </li>
    <li>
        Test may pass the billInfoMap as a <code>Serializable</code>
        to <code>MainActivity</code> through <code>intent.extras</code>.
        Retrieve that billInfoMap, using the key <code>"billInfo"</code>.
        You will want to cast it back to a map to be able to use it as a map.
        The type signature of billInfoMap is
        <code>Map&lt;String, Triple&lt;String, String, Double&gt;&gt;</code>.

        In case no billInfoMap is passed use <br><br>

        <pre><code>
val defaultBillInfoMap = mapOf(
    "ELEC" to Triple("Electricity", "ELEC", 45.0),
    "GAS" to Triple("Gas", "GAS", 20.0),
    "WTR" to Triple("Water", "WTR", 25.0)
)</code></pre><br>

        as default value for billInfoMap.
        The keys are strings, and the values are instances of the class Triple&lt;String, String, Double&gt;&gt;.
        The first sting on this Triple will be used for the billName,
        the second string will be used for the billCode,
        and the double will be used for the billAmount.
    </li>
    <li>
        While at <code>PayBillsFragment</code>
        clicking on back button should redirect users back to
        <code>UserMenuFragment</code>;
    </li>
</ol>


